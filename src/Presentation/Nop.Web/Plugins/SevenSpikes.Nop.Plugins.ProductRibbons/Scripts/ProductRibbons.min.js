!function (t, g, s) { var P, a = "ribbon-wrapper", l = "#product-ribbon-info"; function f(t, o, r) { if (o.productElement) { if (r) { if (!(d = s.getAttrValFromDom(l, "data-productPageBugPictureContainerSelector"))) return } else if (!(d = s.getAttrValFromDom(l, "data-productBoxPictureContainerSelector"))) return; var e, d = o.productElement.find(d); d.parent().hasClass(a) || d && o.productId && 0 < o.productId && (o = o.productId, r ? (e = g(t).filter("div[data-productId='" + o + "']"), d = d.first()) : e = g(t).filter("a[data-productId='" + o + "']"), e && 0 < e.length && (d.wrap('<div class="' + a + '"></div>'), d.after(e))) } } t.showRibbons = function () { var t, o, r, e, d, a, c = 0, n = [], u = (o = ".product-ribbon", r = s.getAttrValFromDom(l, "data-productPagePicturesParentContainerSelector"), e = [], a = {}, (d = s.getAttrValFromDom(l, "data-productId")) && 0 < d && r && ((t = g(r).find(o)) && 0 !== t.length || (a.productId = d, a.productElement = g(r))), g(P).each(function () { var t = g(this).find(o); t && 0 !== t.length || (t = g(this).attr("data-productid")) && 0 < t && (t = { productId: t, productElement: g(this) }, e.push(t)) }), { productPage: a, categoryPageProducts: e }); if (u.productPage && u.productPage.productId && (c = u.productPage.productId), u.categoryPageProducts && 0 < u.categoryPageProducts.length) for (var i = 0; i < u.categoryPageProducts.length; i++) { var p = u.categoryPageProducts[i]; p.hasOwnProperty("productId") && n.push(p.productId) } !c && 0 === n.length || (g.isNumeric(c) || (c = 0), a = { productPageId: c, categoryPageIds: n }, c = s.getAttrValFromDom("#product-ribbon-info", "data-retrieveproductribbonsurl"), g.ajax({ cache: !1, type: "POST", data: g.toJSON(a), contentType: "application/json; charset=utf-8", url: c }).done(function (t) { t && (function (t, o) { if (o && o.productPage && o.productPage.productId && f(t, o.productPage, !0), o && o.categoryPageProducts && 0 < o.categoryPageProducts.length) for (var r = 0; r < o.categoryPageProducts.length; r++)f(t, o.categoryPageProducts[r]) }(t, u), g.event.trigger({ type: "nopProductRibbonsLoadingCompleteEvent" })) })) }, g(document).ready(function () { (P = s.getAttrValFromDom(l, "data-productBoxSelector")) && t.showRibbons() }), g(document).on("nopAjaxFiltersFiltrationCompleteEvent newProductsAddedToPageEvent", nopProductRibbons.showRibbons) }(window.nopProductRibbons = window.nopProductRibbons || {}, jQuery, sevenSpikesCore);