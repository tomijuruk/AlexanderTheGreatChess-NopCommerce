!function(d){function t(){var a=e.scrollTop()+e.outerHeight();d(".spc-products[notLoaded]").each(function(){var t=d(this);t.offset().top<a&&(t.removeAttr("notLoaded"),t.find(".tab:first").click())}),d(".spc-categories[notLoaded]").each(function(){var e=d(this);e.offset().top<a&&(e.removeAttr("notLoaded"),d.ajax({cache:!1,url:e.attr("data-getCategoryGroupInfoUrl"),type:"POST",data:{categoryId:parseInt(e.attr("data-categoryGroupId"))||0}}).done(function(t){e.html(t),e.find(".navigation .tab:first-of-type").removeAttr("notLoaded").addClass("active"),e.find(".category-products .product-grid:first-of-type").addClass("active");t=e.find(".item-grid:first");n&&t.length&&0<t.find(".item-box").length?f(t,"category"):d.event.trigger({type:"newProductsAddedToPageEvent"})}).fail(function(){e.remove()}))}),0===d(".spc-products[notLoaded], .spc-categories[notLoaded]").length&&e.off("scroll.smart-products")}var c,r,l,e=d(window),a=d(".spc-slick-slider-settings"),n=a.attr("data-showitemsincarousel"),g=a.attr("data-slickcategorysettings"),p=a.attr("data-slickproductsettings"),v=a.attr("data-categoryresponsivebreakpoints"),u=a.attr("data-productresponsivebreakpoints");function f(t,e,a){if(t.length&&!t.hasClass("slick-initialized")&&0!=t.find(".item-box").length){var i,s,o,n={};try{n="category"==e?JSON.parse(g):JSON.parse(p)}catch(t){console.log("Invalid category/product collection settings value!")}try{n.responsive="category"==e?JSON.parse(v):JSON.parse(u)}catch(t){console.log("Invalid category/product breakpoints setting value!")}n.appendArrows&&("category"==e?c=n.appendArrows:r=n.appendArrows,s=(i=d(t).closest(".spc")).children(n.appendArrows),n.appendArrows=s,n.useSharedNavigationButtons&&(l=!0,0==s.find(".slick-prev").length&&(o=d('<button type="button" data-role="none" class="slick-prev slick-arrow" aria-label="Previous" role="button" style="">Previous</button>'),s.append(o)),0==s.find(".slick-next").length&&(o=d('<button type="button" data-role="none" class="slick-next slick-arrow" aria-label="Next" role="button" style="">Next</button>'),s.append(o)),n.appendArrows={},n.prevArrow=i.find(".slick-prev"),n.nextArrow=i.find(".slick-next"))),t.on("init",function(){a&&h(t,a),d.event.trigger({type:"newProductsAddedToPageEvent"})}),n.rtl="rtl"==d("html").attr("dir"),t.slick(n)}}function h(t,e){var t=d("img",t),a=t.length;0===a&&e.find(".loading-overlay").fadeOut(),t.load(function(){--a<=0&&e.find(".loading-overlay").fadeOut()})}d(document).ready(function(){d(".spc-products .tab").off("click.smartproductcollections").on("click.smartproductcollections",function(t){t.preventDefault();var e,a,i,s=d(this),o=parseInt(s.attr("data-tabId"));isNaN(o)||(e=s.closest(".spc-products"),a=e.find('.spc-body .product-grid[data-tabId="'+o+'"]'),s.hasClass("loaded")?(s.addClass("active").siblings(".tab").removeClass("active"),e.find('.spc-body .product-grid[data-tabId="'+o+'"]').addClass("active").siblings(".product-grid").removeClass("active"),a.find(".item-grid").hasClass("slick-initialized")&&(i=a.find(".item-grid"),!l||0<(t=d(i).closest(".spc").children(r)).length&&i&&(i.slick("getSlick").slideCount>i.slick("slickGetOption","slidesToShow")?(t.find(".slick-hidden").removeClass("slick-hidden"),t.find(".slick-prev").on("click",function(){i.slick("slickPrev")}),t.find(".slick-next").on("click",function(){i.slick("slickNext")})):t.find(".slick-arrow").addClass("slick-hidden")),i.slick("setPosition"))):(s.addClass("loaded"),e.find(".loading-overlay").show(),d.ajax({cache:!1,url:e.attr("data-getItemProductsUrl"),type:"POST",data:{id:o}}).done(function(t){a.find(".item-grid").html(t),s.addClass("active").siblings(".tab").removeClass("active"),a.addClass("active").siblings(".product-grid").removeClass("active");t=a.find(".item-grid");n&&t.length&&0<t.find(".item-box").length?f(t,"product",e):(h(a,e),d.event.trigger({type:"newProductsAddedToPageEvent"}))})),e.find('.products-mobile-navigation-select option[value="'+o+'"]').attr("selected","selected"))}),d(".spc-products").on("change",".mobile-navigation select",function(){var t=d(this);t.closest(".spc-products").find('.navigation .tab[data-tabId="'+t.val()+'"]').click()}),d(".spc-categories").on("click",".navigation .tab",function(){var t,e=d(this),a=parseInt(e.attr("data-tabId"))||0,i=e.closest(".spc-categories"),s=parseInt(i.attr("data-categoryGroupId"))||0,o=i.find('.category-products .product-grid[data-tabId="'+a+'"]');e.is("[notLoaded]")?(e.removeAttr("notLoaded"),i.find(".loading-overlay").show(),d.ajax({cache:!1,url:i.attr("data-getItemProductsUrl"),type:"POST",data:{id:a,categoryId:s}}).done(function(t){o.children(".item-grid").html(t),e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".product-grid").removeClass("active");t=o.find(".item-grid");n&&t.length&&0<t.find(".item-box").length?f(t,"category",i):(h(o,i),d.event.trigger({type:"newProductsAddedToPageEvent"}))})):(e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".product-grid").removeClass("active"),o.find(".item-grid").hasClass("slick-initialized")&&(t=o.find(".item-grid"),!l||0<(s=d(t).closest(".spc").children(c)).length&&(s.find(".slick-prev").on("click",function(){t.slick("slickPrev")}),s.find(".slick-next").on("click",function(){t.slick("slickNext")})),t.slick("setPosition"))),i.find('.category-mobile-navigation-select option[value="'+a+'"]').attr("selected","selected")}),d(".spc-categories").on("change",".mobile-navigation select",function(){var t=d(this);t.closest(".spc-categories").find('.navigation .tab[data-tabId="'+t.val()+'"]').click()}),setTimeout(t,200),e.on("scroll.smart-products",t)})}(jQuery);