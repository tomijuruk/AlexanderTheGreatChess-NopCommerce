!function(d){function t(){var a=e.scrollTop()+e.outerHeight();d(".spc-products[notLoaded]").each(function(){var t=d(this);t.offset().top<a&&(t.removeAttr("notLoaded"),t.find(".tab:first").click())}),d(".spc-categories[notLoaded]").each(function(){var e=d(this);e.offset().top<a&&(e.removeAttr("notLoaded"),d.ajax({cache:!1,url:e.attr("data-getCategoryGroupInfoUrl"),type:"POST",data:{categoryId:parseInt(e.attr("data-categoryGroupId"))||0}}).done(function(t){e.html(t),e.find(".navigation .tab:first-of-type").removeAttr("notLoaded").addClass("active"),e.find(".category-products .category-product-grid:first-of-type").addClass("active");var a=e.find(".item-grid:first");s&&a.length&&0<a.find(".item-box").length?l(a,"category"):d.event.trigger({type:"newProductsAddedToPageEvent"})}).fail(function(){e.remove()}))}),0===d(".spc-products[notLoaded], .spc-categories[notLoaded]").length&&e.off("scroll.smart-products")}var e=d(window),a=d("#spc-slick-slider-settings"),s=a.attr("data-showitemsincarousel"),o=a.attr("data-slickcategorysettings"),r=a.attr("data-slickproductsettings"),c=a.attr("data-categoryresponsivebreakpoints"),n=a.attr("data-productresponsivebreakpoints");function l(t,a,e){if(t.length&&!t.hasClass("slick-initialized")&&0!=t.find(".item-box").length){var i={};try{i="category"==a?JSON.parse(o):JSON.parse(r)}catch(t){console.log("Invalid category/product collection settings value!")}try{i.responsive="category"==a?JSON.parse(c):JSON.parse(n)}catch(t){console.log("Invalid category/product breakpoints setting value!")}t.on("init",function(){e&&g(t,e),d.event.trigger({type:"newProductsAddedToPageEvent"})}),i.rtl="rtl"==d("html").attr("dir"),t.slick(i)}}function g(t,a){var e=d("img",t),i=e.length;0===i&&a.find(".loading-overlay").fadeOut(),e.load(function(){--i<=0&&a.find(".loading-overlay").fadeOut()})}d(document).ready(function(){d(".spc-products .tab").off("click.smartproductcollections").on("click.smartproductcollections",function(t){t.preventDefault();var e,i,o=d(this),a=parseInt(o.attr("data-tabId"));isNaN(a)||(e=o.closest(".spc-products"),i=e.find('.spc-body .product-grid[data-tabId="'+a+'"]'),o.hasClass("loaded")?(o.addClass("active").siblings(".tab").removeClass("active"),e.find('.spc-body .product-grid[data-tabId="'+a+'"]').addClass("active").siblings(".product-grid").removeClass("active"),i.find(".item-grid").hasClass("slick-initialized")&&i.find(".item-grid").slick("setPosition")):(o.addClass("loaded"),e.find(".loading-overlay").show(),d.ajax({cache:!1,url:e.attr("data-getItemProductsUrl"),type:"POST",data:{id:a}}).done(function(t){i.find(".item-grid").html(t),o.addClass("active").siblings(".tab").removeClass("active"),i.addClass("active").siblings(".product-grid").removeClass("active");var a=i.find(".item-grid");s&&a.length&&0<a.find(".item-box").length?l(a,"product",e):(g(i,e),d.event.trigger({type:"newProductsAddedToPageEvent"}))})))}),d(".spc-products").on("change",".mobile-navigation select",function(){var t=d(this);t.closest(".spc-products").find('.navigation .tab[data-tabId="'+t.val()+'"]').click()}),d(".spc-categories").on("click",".navigation .tab",function(){var e=d(this),t=parseInt(e.attr("data-tabId"))||0,i=e.closest(".spc-categories"),a=parseInt(i.attr("data-categoryGroupId"))||0,o=i.find('.category-products .category-product-grid[data-tabId="'+t+'"]');e.is("[notLoaded]")?(e.removeAttr("notLoaded"),i.find(".loading-overlay").show(),d.ajax({cache:!1,url:i.attr("data-getItemProductsUrl"),type:"POST",data:{id:t,categoryId:a}}).done(function(t){o.children(".item-grid").html(t),e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".category-product-grid").removeClass("active");var a=o.find(".item-grid");s&&a.length&&0<a.find(".item-box").length?l(a,"category",i):(g(o,i),d.event.trigger({type:"newProductsAddedToPageEvent"}))})):(e.addClass("active").siblings(".tab").removeClass("active"),o.addClass("active").siblings(".category-product-grid").removeClass("active"),o.find(".item-grid").hasClass("slick-initialized")&&o.find(".item-grid").slick("setPosition")),i.find('.category-mobile-navigation-select option[value="'+t+'"]').attr("selected","selected")}),d(".spc-categories").on("change",".mobile-navigation select",function(){var t=d(this);t.closest(".spc-categories").find('.navigation .tab[data-tabId="'+t.val()+'"]').click()}),setTimeout(t,200),e.on("scroll.smart-products",t)})}(jQuery);